<!DOCTYPE html>
<html>
<script src="draw.js"></script>
<script src="math2.js"></script>
<script src="Button.js"></script>
<head>
	<title>
		Balls!
	</title>
</head>
<body>
	<canvas style="border: 2px dashed green" id="main"></canvas>
	<script type="text/javascript">
		const MM = {
			c: document.getElementById('main')
		};
		const D = new Draw(MM.c);
		function init(){
			MM.c.width = window.innerWidth, MM.c.height = window.innerHeight;
			MM.ww = MM.c.width, MM.hh = MM.c.height;
			MM.mx = 0, MM.my = 0;
		}
		init();
	</script>
	<script src="Ball.js"></script>
	<script src="Me.js"></script>
	<script type="text/javascript">
		var sc = 0;
		var bw = [];
		var me = new Me();
		me.p = new Point2(MM.ww/2,MM.hh/2);
		function XX(event){
			var e = event || window.event;
			var mouseX = e.offsetX, mouseY = e.offsetY;
			for (var i = bw.length - 1; i >= 0; i--) {
				if(bw[i].in(mouseX,mouseY) && bw[i].f){
					bw[i].f();
				}
			}
		}
		MM.c.onmousedown = XX;
		function grid(sp){
			for(var x=0;x<MM.ww;x+=sp){
				D.line(x,0,x,MM.hh,"#AAAAAA",1);
			}
			for(var y=0;y<=MM.hh;y+=sp){
				D.line(0,y,MM.ww,y,"#AAAAAA",1);
			}
		}
		var playButt = new Button(MM.ww/2,MM.hh/4*3,MM.ww/3,MM.hh/5,"Play!",function(){
			sc = 1;
			this.f = null;
		});
		function run(){
			D.fillRect(0,0,MM.ww,MM.hh,"#FFFFFF");
			grid(84);
			if(sc == 0){
				playButt.run();
				D.strokeText("Balls!", MM.ww/2,MM.hh/4,"182px monospace","#0000FF");
			}else if(sc == 1){
				me.a+=0.05;
				me.update();
				me.draw();
			}
			setTimeout(run, 10);
		}
		run();
	</script>
</body>
</html>